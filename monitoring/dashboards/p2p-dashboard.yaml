apiVersion: 1
providers:
  - name: 'P2P Dashboard'
    orgId: 1
    folder: ''
    type: file
    disableDeletion: false
    updateIntervalSeconds: 10
    options:
      path: /etc/grafana/provisioning/dashboards/p2p-dashboard.json
---
apiVersion: 1
datasources:
  - name: Prometheus
    type: prometheus
    url: http://prometheus:9090
    access: proxy
    isDefault: true
    version: 1
    editable: true
---
apiVersion: 1
dashboards:
  - name: P2P Data Ingestion
    message: ""
    title: P2P Data Ingestion
    tags:
      - p2p
      - binance
      - data ingestion
    timezone: browser
    rows:
      - title: Overview
        height: 300px
        panels:
          - title: Data Completeness
            type: gauge
            dataSource: Prometheus
            targets:
              - expr: p2p_extraction_data_completeness
            gridPos:
              x: 0
              y: 0
              w: 8
              h: 6
          - title: Error Count (Last 24 hours)
            type: graph
            dataSource: Prometheus
            targets:
              - expr: increase(p2p_extraction_errors_total[24h])
            gridPos:
              x: 8
              y: 0
              w: 8
              h: 6
          - title: Request Processing Time (Last 5 minutes)
            type: graph
            dataSource: Prometheus
            targets:
              - expr: rate(p2p_extraction_request_processing_seconds_sum[5m]) / rate(p2p_extraction_request_processing_seconds_count[5m])
            gridPos:
              x: 16
              y: 0
              w: 8
              h: 6